<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Taşınıyo çoook yakında!</title>
  <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link
    rel="stylesheet"
    type="text/css"
    href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css"
  />
  <link
    rel="stylesheet"
    type="text/css"
    href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/bold/style.css"
  />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Plus Jakarta Sans', Arial, sans-serif;
      background-color: #3C4CAB;
      margin: 0;
    }
    .fixed-marquee-cars {
      position: fixed;
      bottom: 24px;
      width: 100%;
      overflow: hidden;
      box-sizing: border-box;
      padding: 8px 0;
    }

    .cars-container {
      display: flex;
      animation: scroll-cars 15s linear infinite;
    }

    .car-image {
      height: 40px;
      width: auto;
      object-fit: contain;
      flex-shrink: 0;
    }

    @keyframes scroll-cars {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    .fixed-marquee {
      position: fixed;
      bottom: 0;
      width: 100%;
      background-color: #000;
      overflow: hidden;
      white-space: nowrap;
      box-sizing: border-box;
      padding: 4px 0;
    }

    .fixed-marquee span {
      display: inline-block;
      white-space: nowrap;
      color: #fff;
      font-size: 14px;
      font-weight: 500;
      padding-left: 0;
      animation: scroll-text 120s linear infinite;
    }

    @keyframes scroll-text {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
  </style>
</head>
<body>
  <div class="flex flex-row max-w-7xl p-5 mx-auto w-full justify-between">
    <div class="pt-8">
      <img src="./assets/logo.webp" alt="Logo" class="h-14">
      <p class="text-[#FFCA28] text-lg font-semibold mt-12 tracking-tight">#En sevilen taşımacılık platformu</p>
      <h1 class="text-white text-6xl leading-[1.1] font-bold mt-2 tracking-tight">Aracınızı ve zamanınızı <br>gelire dönüştürün!</h1>
      <p class="text-white/80 text-lg my-6">
        Bu eşsiz fırsatı kaçırma! Taşınıyo'ya ilk katılan 100 sürücüden biri ol,<br> 3 ay boyunca yaptığın işlerin tamamını cebine koy!
      </p>
      <div class="mt-16">
        <img src="./assets/board.webp" alt="Board" class="w-[40rem]">
      </div>
    </div>
    <div class="pt-16">
      <img src="./assets/opportunity.webp" alt="Opportunity" class="w-[34rem] opportunity">
      <form id="driverForm" class="p-8 bg-white rounded-2xl mt-8 flex flex-col gap-3 w-[30rem] mx-auto">
        <div class="relative">
          <input
            type="text"
            name="first_name"
            placeholder="Ad"
            required
            class="border border-black/10 py-2.5 pl-10 pr-4 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[#3C4CAB]"
          />
          <i class="ph ph-user text-xl absolute left-3 top-2.5"></i>
        </div>
        <div class="relative">
          <input
            type="text"
            name="last_name"
            placeholder="Soyad"
            required
            class="border border-black/10 py-2.5 pl-10 pr-4 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[#3C4CAB]"
          />
          <i class="ph ph-user-circle text-xl absolute left-3 top-2.5"></i>
        </div>
        <div class="relative">
          <input
            type="email"
            name="email"
            placeholder="E-posta"
            required
            class="border border-black/10 py-2.5 pl-10 pr-4 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[#3C4CAB]"
          />
          <i class="ph ph-at text-xl absolute left-3 top-2.5"></i>
        </div>
        <div class="relative">
          <input
            type="text"
            name="phone"
            placeholder="Telefon"
            required
            class="border border-black/10 py-2.5 pl-10 pr-4 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[#3C4CAB]"
          />
          <i class="ph ph-phone text-xl absolute left-3 top-2.5"></i>
        </div>
        <div class="relative">
          <select name="vehicle_type" required class="border border-black/10 py-2.5 pl-10 pr-4 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[#3C4CAB] appearance-none bg-white">
            <option value="">Araç Tipi Seç</option>
            <option value="motosiklet">Motosiklet</option>
            <option value="doblo">Doblo</option>
            <option value="panelvan">Panelvan</option>
            <option value="kamyonet">Kamyonet</option>
            <option value="kamyon">Kamyon</option>
          </select>
          <i class="ph ph-car-profile text-xl absolute left-3 top-2.5"></i>
          <i class="ph ph-caret-down text-xl absolute right-3 top-2.5 pointer-events-none"></i>
        </div>
        
        <div class="flex flex-col mt-4 ml-3">
          <span class="text-base mb-3">Araç sahibi siz misiniz?</span>
          <div class="flex items-center gap-6">
            <label class="flex items-center gap-1.5 text-base text-gray-600">
              <input type="radio" name="consent" value="yes" id="consentYes" class="accent-[#3C4CAB]" />
              Evet
            </label>
            <label class="flex items-center gap-1.5 text-base text-gray-600">
              <input type="radio" name="consent" value="no" id="consentNo" class="accent-[#3C4CAB]" />
              Hayır
            </label>
          </div>
        </div>
        <button type="submit" disabled class="bg-black py-3 px-4 text-center rounded-lg text-white font-medium mt-6 opacity-50 cursor-not-allowed transition-opacity">Gönder</button>
      </form>
    </div>

  </div>
  <!-- Araç görselleri marquee -->
  <div class="fixed-marquee-cars">
    <div class="cars-container">
      <img src="./assets/car1.webp" alt="Araç 1" class="car-image">
      <img src="./assets/car2.webp" alt="Araç 2" class="car-image">
      <img src="./assets/car3.webp" alt="Araç 3" class="car-image">
      <img src="./assets/car4.webp" alt="Araç 4" class="car-image">
      <img src="./assets/car1.webp" alt="Araç 1" class="car-image">
      <img src="./assets/car2.webp" alt="Araç 2" class="car-image">
      <img src="./assets/car3.webp" alt="Araç 3" class="car-image">
      <img src="./assets/car4.webp" alt="Araç 4" class="car-image">
      <img src="./assets/car1.webp" alt="Araç 1" class="car-image">
      <img src="./assets/car2.webp" alt="Araç 2" class="car-image">
      <img src="./assets/car3.webp" alt="Araç 3" class="car-image">
      <img src="./assets/car4.webp" alt="Araç 4" class="car-image">
    </div>
  </div>

  <!-- Metin marquee -->
  <div class="fixed-marquee">
    <span>
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp; 
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! &nbsp;
      İstanbul, Ankara, İzmir ve Muğla'da Başladık, Çok Yakında Tüm Türkiye'deyiz! 
    </span>
  </div>

  <script src="./config.js"></script>
  <script>
    const opportunity = document.querySelector('.opportunity');
  
    function shake() {
      opportunity.classList.add('animate__animated', 'animate__shakeX');
      setTimeout(() => {
        opportunity.classList.remove('animate__animated', 'animate__shakeX');
      }, 1000); // shake duration 1s
    }
  
    // Sayfa yüklenir yüklenmez hemen sallansın
    shake();
  
    // Daha sonra her 5 saniyede bir tekrarlansın
    setInterval(shake, 5000);


    const SUPABASE_URL = window.env.SUPABASE_URL;
    const SUPABASE_ANON_KEY = window.env.SUPABASE_ANON_KEY;

    document.getElementById('driverForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const form = e.target;
      const submitButton = document.querySelector("button[type='submit']");
      
      // Buton durumunu güncelle - gönderiliyor
      submitButton.disabled = true;
      submitButton.textContent = 'Gönderiliyor...';
      submitButton.classList.add("opacity-50", "cursor-not-allowed");

      const data = {
        first_name: form.first_name.value,
        last_name: form.last_name.value,
        email: form.email.value,
        phone: form.phone.value,
        vehicle_type: form.vehicle_type.value
      };

      try {
        const res = await fetch(`${SUPABASE_URL}/rest/v1/drivers`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'apikey': SUPABASE_ANON_KEY,
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
          },
          body: JSON.stringify(data)
        });

        const result = await res.json();
        if (!res.ok) throw result;

        // Başarılı durum
        submitButton.textContent = 'Gönderildi!';
        submitButton.classList.remove("bg-black");
        submitButton.classList.add("bg-green-600");
        
        // Formu temizle
        form.reset();
        
        // 3 saniye sonra normal duruma dön
        setTimeout(() => {
          submitButton.textContent = 'Gönder';
          submitButton.classList.remove("bg-green-600");
          submitButton.classList.add("bg-black");
          updateButtonState(); // Form durumunu kontrol et
        }, 3000);

      } catch (err) {
        console.error(err);
        
        // Başarısız durum
        submitButton.textContent = 'Gönderme Başarısız';
        submitButton.classList.remove("bg-black");
        submitButton.classList.add("bg-red-600");
        
        // 3 saniye sonra normal duruma dön
        setTimeout(() => {
          submitButton.textContent = 'Gönder';
          submitButton.classList.remove("bg-red-600");
          submitButton.classList.add("bg-black");
          updateButtonState(); // Form durumunu kontrol et
        }, 3000);
      }
    });


    // Form alanları ve submit butonu kontrolü
    const form = document.getElementById('driverForm');
    const submitButton = document.querySelector("button[type='submit']");
    const consentYes = document.getElementById("consentYes");

    function updateButtonState() {
      // Tüm zorunlu alanları kontrol et
      const firstName = form.first_name.value.trim();
      const lastName = form.last_name.value.trim();
      const email = form.email.value.trim();
      const phone = form.phone.value.trim();
      const vehicleType = form.vehicle_type.value;
      const consent = consentYes.checked;

      // Tüm alanlar doldurulmuş ve "Evet" seçilmiş mi kontrol et
      const allFieldsFilled = firstName && lastName && email && phone && vehicleType && consent;

      if (allFieldsFilled) {
        submitButton.disabled = false;
        submitButton.classList.remove("opacity-50", "cursor-not-allowed");
      } else {
        submitButton.disabled = true;
        submitButton.classList.add("opacity-50", "cursor-not-allowed");
      }
    }

    // Tüm input alanlarına event listener ekle
    form.first_name.addEventListener("input", updateButtonState);
    form.last_name.addEventListener("input", updateButtonState);
    form.email.addEventListener("input", updateButtonState);
    form.phone.addEventListener("input", updateButtonState);
    form.vehicle_type.addEventListener("change", updateButtonState);
    consentYes.addEventListener("change", updateButtonState);
    
    // İlk durum kontrolü
    updateButtonState();

    // Araç görselleri arasına rastgele boşluklar ekle
    function addRandomSpacing() {
      const carImages = document.querySelectorAll('.car-image');
      carImages.forEach((car, index) => {
        if (index > 0) { // İlk araçtan sonraki araçlar için
          // 10vw ile 30vw arasında rastgele boşluk
          const randomGap = Math.random() * 20 + 10;
          car.style.marginLeft = randomGap + 'vw';
        }
      });
    }

    // Sayfa yüklendiğinde rastgele boşlukları ekle
    addRandomSpacing();
  </script>
</body>
</html>
